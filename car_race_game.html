<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Racing moto</title>
    <link rel="stylesheet" href="car_game.css">
</head>
<body>
    <div class="container">
    <div id="game">
        <div id="bluecar"><img src="blue.png" alt=""></div>
        <div id="racecar"><img src="race.png" alt=""></div>
    </div>
    <div id="result">
        <h1 id="game_ovr">Game Over</h1>
        <br>
        <p id="score"></p>
        <br>
        <button id="btn" onclick="location.reload()">Restart</button>
    </div>

    <audio id="jumpsound" src="jumpsound.mp3"></audio>
    <audio id="game_over_sound" src="game_over_sound.mp3"></audio>
    </div>
    
</body>
<script>
    var blueCar = document.getElementById("bluecar");
    var raceCar = document.getElementById("racecar");
    var result = document.getElementById("result")
    const score =  document.getElementById("score")
    var game =  document.getElementById("game");
    var counter = 0;
    var jumpsound = document.getElementById("jumpsound")
    var game_over_sound=document.getElementById("game_over_sound");
    
    
    
    // bluecar move
    
    
    // bluecar move
    //animationiteration :- when an animation comaplete and repeat it is ... it is an event listener
    //Math.random()*3 :- return number from 1 to 3
    //Math.floor() :- convert float value into integer eg: 3.3=3
    blueCar.addEventListener("animationiteration", function(){
        var random = ((Math.floor(Math.random() * 3)) * 130)
        blueCar.style.left = random + "px";
        counter++
    })
    
    //rececar move
    window.addEventListener("keydown", function(e){
       if(e.keyCode == "39"){ var raceCarLeft = parseInt(window.getComputedStyle(raceCar).getPropertyValue("left"))
        if(raceCarLeft < 260){raceCar.style.left = (raceCarLeft + 130) + "px"}
        jumpsound.play()
    };
    
        if(e.keyCode == "37"){
            var raceCarLeft = parseInt(window.getComputedStyle(raceCar).getPropertyValue("left"))
            if(raceCarLeft > 0){raceCar.style.left = (raceCarLeft - 130) + "px"
            jumpsound.play()
        }
    
        }
    })
    
    
    //Game over
    setInterval(function Gameover (){
        var blueCarTop = parseInt(window.getComputedStyle(blueCar).getPropertyValue("top"))
        var blueCarLeft = parseInt(window.getComputedStyle(blueCar).getPropertyValue("left"));
        var raceCarLeft = parseInt(window.getComputedStyle(raceCar).getPropertyValue("left"));
            if((blueCarLeft === raceCarLeft) && (blueCarTop > 250) && (blueCarTop < 450)){
                result.style.display = "block";
                game_over_sound.play();
                game.style.display = "none";
                score.innerHTML = `score: ${counter} `;
    
                counter = 0;
            }
    }, 10)     
</script>
</html>
